function formatMoneys(nThis,c,d,t){var n=nThis,c=isNaN(c=Math.abs(c))?2:c,d=d==undefined?".":d,t=t==undefined?",":t,s=n<0?"-":"",i=parseInt(n=Math.abs(+n||0).toFixed(c))+"",j=(j=i.length)>3?j%3:0;return s+(j?i.substr(0,j)+t:"")+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+t)+(c?d+Math.abs(n-i).toFixed(c).slice(2):"")};var numBrandsGot=0;var brands=["aveda","clinique","m-a-c","bobbi brown","bumble and bumble","estee lauder","origins","smashbox","lab series","darphin","rodin","adf","jo malone","tom ford","estee lauder DIS","jo malone DIS","origins DIS","aveda DIS","bumble and bumble DIS","bobbi brown DIS","m-a-c DIS","clinique DIS","la mer","wips_donations"];var items=[];var isFirstTime=!0;var optionsAllProducts={valueNames:['brand','productImage','prodRgnName','shadeOrSize','formattedPrice','sale','formattedSale','qty','id'],listClass:'list',searchClass:'search',page:1500,item:'<li class="products item"> <aside class="row"> <span class="id"></span> <span class="brand"></span> <span class="isSelected"></span> <div class="col-xs-3 productImage"></div><div class="col-xs-7"> <h2 class="prodRgnName"></h2> <h4 class="shadeOrSize"></h4> <h5>Retail: <span class="formattedPrice"></span> Sale: <span class="formattedSale"></span></h5> <div class="qty-container"><button class="minus">-</button><span class="qty"></span><button class="plus">+</button></div> </div><div class="col-xs-2"> <button class="addToWishlist"><span class="glyphicon glyphicon-plus-sign"> </span><span class="glyphicon glyphicon-heart"> </span></button> </div></aside></li>'};var allProducts=new List('all-products',optionsAllProducts);var optionsPS={valueNames:['brand','productImage','prodRgnName','shadeOrSize','formattedPrice','sale','formattedSale','qty','id'],listClass:'listPS',searchClass:'searchPS',page:600,item:'<li class="wishlist item"> <aside class="row"> <span class="id"></span> <span class="brand"></span> <div class="col-xs-3 productImage"></div><div class="col-xs-7"> <h2 class="prodRgnName"></h2> <h4 class="shadeOrSize"></h4> <h5><span class="formattedPrice"></span> Sale: <span class="formattedSale"></span></h5> <div class="qty-container"><button class="minus">-</button><span class="qty"></span><button class="plus">+</button></div> </div><div class="col-xs-2"> <button class="addToWishlist"><span class="glyphicon glyphicon-minus-sign"> </span></button> </div></aside></li>'};var ps=new List('wishlist',optionsPS);var arrayPS=[];function showBooths(){$('html, body').animate({scrollTop:0},150,"swing");$('#title').text('Select brand');$('article#booths').fadeTo(200,1);$('article#all-products').hide();$('article#wishlist').hide();$('nav').hide();$('header .back').hide()}
function showProducts(brand){allProducts.search(brand);$('html, body').animate({scrollTop:0},150,"swing");$('#title').text(brand.replace(/-/g,''));$('article#booths').hide();$('article#all-products').fadeTo(200,1);$('article#wishlist').hide();$('nav').hide();$('header .back').show()}
function showWishlist(){$('#title').text('Wishlist');$('article#booths').hide();$('article#all-products').hide();$('article#wishlist').fadeTo(200,1);$('nav').fadeTo(200,1);$('header .back').hide()}
function filter(brand){if(brand===''){$('#showWhichBooth').text('All')}else{$('#showWhichBooth').text(brand)}
ps.search(brand);if(ps.search(brand).length===0&&brand===' '){$('#wishlist-brand').hide()}else if(ps.search(brand).length===0){$('#wishlist-brand').show()}else{$('#wishlist-brand').hide()}}
function checkIfWishlistEmpty(){if(ps.size()===0){$('#wishlist-empty').slideToggle();$('nav').hide()}else{$('#wishlist-empty').hide()}}
function saveWishlistToDb(){dbwish.transaction(function(tx){tx.executeSql('SELECT * FROM wishlist',[],function(tx,results){console.log("wishlist items saved: "+results.rows.length)})});items=[];for(j=0;j<ps.items.length;j++){items[j]=ps.items[j].values()}
dbwish.transaction(function(tx){tx.executeSql('UPDATE wishlist SET items=? WHERE id=1;',[JSON.stringify(items)],function(tx,res){},function(tx,err){})});$('#save-wishlist').slideToggle();$('#saved').show()}
function addToWishlistFromDb(){dbwish.transaction(function(tx){tx.executeSql('SELECT * FROM wishlist',[],function(tx,results){var itemsParsed=JSON.parse(results.rows.item(0).items);items=itemsParsed;items.forEach(function(currVal,index,arr){console.log(currVal.brand);ps.add([{brand:currVal.brand,productImage:currVal.productImage,prodRgnName:currVal.prodRgnName,shadeOrSize:currVal.shadeOrSize,formattedPrice:currVal.formattedPrice,sale:currVal.sale,formattedSale:currVal.formattedSale,qty:currVal.qty,id:currVal.id}])});console.log('parsed wishlist items length: '+itemsParsed.length);checkIfWishlistEmpty();updateCounter()},function(tx,err){console.log('errors: '+err)})})}
$('nav li').on('click',function(){$('nav li').css({'background-color':'#000','color':'#fff'});$(this).css({'background-color':'#fff','color':'#000'});$('nav ul').slideToggle()})
window.onload=function(){addToWishlistFromDb();var userTag='';ps.on('updated',function(){updateCounter();$('#saved').hide();$('#save-wishlist').show()});$('button#products').on('click',function(){showBooths()});$('button#wishlist').on('click',function(){showWishlist();$('html, body').animate({scrollTop:0},150,"swing");$('.wishlist.item .addToWishlist').off('click');$('.wishlist.item .addToWishlist').on('click',function(){var wsID=$(this).parents('li').find('.id').text();var c=allProducts.get("id",wsID)[0];c.values({isSelected:" "});var cDOM=c.elm;$(cDOM).removeClass('selected');$(cDOM).find('.addToWishlist > .glyphicon.glyphicon-heart').hide();$(cDOM).find('.addToWishlist > .glyphicon.glyphicon-plus-sign').show();$(this).parents('li').slideToggle(250,function(){ps.remove("id",wsID);checkIfWishlistEmpty()})});activateQtyCounter();$('#showWhichBooth').text('All');$('nav li').css({'background-color':'#000','color':'#fff'});filter('')})};$(document).ready(function(){$('#welcome').modal();for(var i=0;i<brands.length;i++){getProducts(brands[i])}
$('#sortByBooth').on('click',function(){$('nav ul').slideToggle()})
$('#welcome').on('hidden.bs.modal',function(e){$('nav ul').slideToggle()})})
function updateCounter(){$('.badge').text(ps.size());var subtotal=0.00;for(i=0;i<ps.size();i++){subtotal+=Number(ps.items[i]._values.sale)*Number(ps.items[i]._values.qty)}
$('#subtotal').text(formatMoneys(subtotal,2))}
function activateClickSelect(){$(".products.item").on("click",function(){$(this).toggleClass("selected");var x=$(this).html();var txt=$(this).find(".isSelected").text();var thisItem=$(this).find(".isSelected");var thisItemID=$(this).find(".id").text();var b=allProducts.get('id',thisItemID)[0];var thisItemBrand=$(this).find(".brand").text();if(txt===" "||!txt){$(this).find('.addToWishlist > .glyphicon.glyphicon-plus-sign').hide();$(this).find('.addToWishlist > .glyphicon.glyphicon-heart').fadeTo(300,1);b.values({isSelected:"wishlist"});ps.add([{brand:thisItemBrand,productImage:b._values.productImage,prodRgnName:b._values.prodRgnName,shadeOrSize:b._values.shadeOrSize,formattedPrice:b._values.formattedPrice,sale:b._values.sale,formattedSale:b._values.formattedSale,qty:b._values.qty,id:thisItemID}])}else{$(this).find('.addToWishlist > .glyphicon.glyphicon-heart').hide();$(this).find('.addToWishlist > .glyphicon.glyphicon-plus-sign').fadeTo(300,1);b.values({isSelected:" "});ps.remove("id",thisItemID)}
allProducts.update();checkIfWishlistEmpty()});$(function(){FastClick.attach(document.body)})};function activateQtyCounter(){$('button.plus').off('click');$('button.plus').on('click',function(){var thisQty=$(this).prev('.qty').text();thisQty=Number(thisQty);thisQty+=1;$(this).prev('.qty').text(thisQty);var thisItemID=$(this).parents(".col-xs-7").siblings(".id").text();var d=ps.get('id',thisItemID)[0];console.log(thisItemID);d.values({qty:thisQty});updateCounter();ps.update()});$('button.minus').off('click');$('button.minus').on('click',function(){var thisQty=$(this).next('.qty').text();thisQty=Number(thisQty);thisQty-=1;if(thisQty<1){thisQty=1}
$(this).next('.qty').text(thisQty);var thisItemID=$(this).parents(".col-xs-7").siblings(".id").text();console.log(thisItemID);var d=ps.get('id',thisItemID)[0];d.values({qty:thisQty});updateCounter();ps.update()})};function addToPS(x){var thisItemID=$(x).find(".id").text();var a=allProducts.get('id',thisItemID)[0];arrayPS[thisItemID]={brand:a._values.brand,productImage:a._values.productImage,prodRgnName:a._values.prodRgnName,shadeOrSize:a._values.shadeOrSize,formattedPrice:a._values.formattedPrice,sale:a._values.sale,formattedSale:a._values.formattedSale,qty:a._values.qty,productID:a._values.id}}
function removeFromPS(x){var thisItemID=$(x).find(".id").text();arrayPS[thisItemID]=null}
var dbinv=openDatabase('invdb','1.0','BCA Inventory',2*1024*1024);var dbwish=openDatabase('wishdb','1.0','BCA Wishlist',2*1024*1024);function createDb(){dbinv.transaction(function(tx){tx.executeSql('CREATE TABLE IF NOT EXISTS inventories (brand, inventory)');console.log('inv created')});dbwish.transaction(function(tx){tx.executeSql('CREATE TABLE IF NOT EXISTS wishlist (items DEFAULT "[ ]", id INTEGER DEFAULT "1")');console.log('wish created')});dbwish.transaction(function(tx){tx.executeSql('INSERT INTO wishlist (items, id) VALUES (?, 1);',['[]'],function(tx,res){},function(tx,err){})})}
function destroyDb(){dbinv.transaction(function(tx){tx.executeSql('DROP TABLE inventories')});dbwish.transaction(function(tx){tx.executeSql('DROP TABLE wishlist')})}
createDb();function addDataToDbFromServer(forBrand,brandUrl,obj,status){dbinv.transaction(function(tx){if(forBrand==="rodin"||forBrand==="adf"||forBrand==="aerin"||forBrand==="tom ford"||forBrand==="jo malone DIS"||forBrand==="origins DIS"||forBrand==="aveda DIS"||forBrand==="bumble and bumble DIS"||forBrand==="bobbi brown DIS"||forBrand==="m-a-c DIS"||forBrand==="clinique DIS"||forBrand==="estee lauder DIS"||forBrand==="la mer"){var stringifiedObj=obj.responseText}else{var stringifiedObj=JSON.stringify(obj.responseJSON)}
tx.executeSql('SELECT * FROM inventories WHERE brand=?',[forBrand],function(tx,results){if(results.rows.length===0){tx.executeSql('INSERT INTO inventories (brand, inventory) VALUES (?, ?);',[forBrand,stringifiedObj],function(tx,res){console.log(res.rows.length)},function(tx,err){})}else{tx.executeSql('UPDATE inventories SET inventory=? WHERE brand=?;',[stringifiedObj,forBrand],function(){},function(tx,err){})}})})}
function addDataToDomFromDb(forBrand,brandUrl){dbinv.transaction(function(tx){tx.executeSql('SELECT * FROM inventories WHERE brand=?',[forBrand],function(tx,results){if(results.rows.length>0){console.log('**********************');for(var i=0;i<results.rows.length;i++)
{var inv=results.rows.item(i).inventory;var dataParsed=JSON.parse(inv);var output='';bySku(dataParsed,forBrand,brandUrl);for(var property in dataParsed){console.log("length: "+dataParsed.length)}
numBrandsGot++;$('.progress-bar').css('width',Math.floor(numBrandsGot/brands.length*100)+'%');$('span.loading-progress').text(Math.floor(numBrandsGot/brands.length*100)+'%');if(numBrandsGot===brands.length){activateClickSelect();$('#loading-products').hide();showBooths()}
console.log("Sending from db: "+results.rows.item(i).brand)}}else{}})})}
function getProducts(forBrand){switch(forBrand){case "aveda":var brand='aveda';var brandUrl='http://www.aveda.com';var layersUrl='http://ota.esteeonline.com/wishlist/manifest/aveda1.json';break;case "aveda DIS":var brand='aveda';var brandUrl='http://ota.esteeonline.com/wishlist/images/aveda';var layersUrl='http://ota.esteeonline.com/wishlist/manifest/aveda.json';break;case "bobbi brown":var brand='bobbi brown';var brandUrl='http://www.bobbibrown.com';var layersUrl='https://layers.esteeonline.com/api/prodcat/LAYER0246/skus?q={"data.collection":"bca"}&select=shadename,formattedPrice,productSize,largeImage,parent.prodRgnName,parent.largeImage,parent.imageL,sale';break;case "bobbi brown DIS":var brand='bobbi brown';var brandUrl='';var layersUrl='http://ota.esteeonline.com/wishlist/manifest/bobbi.json';break;case "bumble and bumble":var brand='bumble and bumble';var brandUrl='http://www.bumbleandbumble.com';var layersUrl='https://layers.esteeonline.com/api/prodcat/LAYER0247/skus?q={"data.collection":"bca"}&select=shadename,formattedPrice,productSize,largeImage,parent.prodRgnName,parent.largeImage,parent.imageL,sale';break;case "bumble and bumble DIS":var brand='bumble and bumble';var brandUrl='';var layersUrl='http://ota.esteeonline.com/wishlist/manifest/bumble.json';break;case "clinique":var brand='clinique';var brandUrl='http://www.clinique.com';var layersUrl='https://layers.esteeonline.com/api/prodcat/LAYER0025/skus?q={"data.collection":"bca"}&select=shadename,formattedPrice,productSize,largeImage,parent.prodRgnName,parent.largeImage,parent.imageL,sale';break;case "clinique DIS":var brand='clinique';var brandUrl='http://ota.esteeonline.com/wishlist/images/clinique';var layersUrl='http://ota.esteeonline.com/wishlist/manifest/clinique.json';break;case "darphin":var brand='darphin';var brandUrl='http://www.darphin.com';var layersUrl='https://layers.esteeonline.com/api/prodcat/LAYER0272/skus?q={"data.collection":"bca"}&select=shadename,formattedPrice,productSize,largeImage,parent.prodRgnName,parent.largeImage,parent.imageL,sale';break;case "estee lauder":var brand='estee lauder';var brandUrl='http://www.esteelauder.com';var layersUrl='https://layers.esteeonline.com/api/prodcat/LAYER0423/skus?q={"data.collection":"bca"}&select=shadename,formattedPrice,productSize,largeImage,parent.prodRgnName,parent.largeImage,parent.imageL,sale';break;case "estee lauder DIS":var brand='estee lauder';var brandUrl='';var layersUrl='http://ota.esteeonline.com/wishlist/manifest/estee.json';break;case "jo malone":var brand='jo malone';var brandUrl='http://www.jomalone.com';var layersUrl='https://layers.esteeonline.com/api/prodcat/LAYER0350/skus?q={"data.collection":"bca"}&select=shadename,formattedPrice,productSize,largeImage,parent.prodRgnName,parent.largeImage,parent.imageL,sale';break;case "jo malone DIS":var brand='jo malone';var brandUrl='http://ota.esteeonline.com/wishlist/images/jomalone';var layersUrl='http://ota.esteeonline.com/wishlist/manifest/jomalone.json';break;case "lab series":var brand='lab series';var brandUrl='http://www.labseries.com';var layersUrl='https://layers.esteeonline.com/api/prodcat/LAYER0274/skus?q={"data.collection":"bca"}&select=shadename,formattedPrice,productSize,largeImage,parent.prodRgnName,parent.largeImage,parent.imageL,sale';break;case "la mer":var brand='la mer';var brandUrl='http://www.cremedelamer.com';var layersUrl='http://ota.esteeonline.com/wishlist/manifest/lamer.json';break;case "m-a-c":var brand='m-a-c';var brandUrl='http://www.maccosmetics.com';var layersUrl='https://layers.esteeonline.com/api/prodcat/LAYER0024/skus/?q={"data.collection":"bca"}&select=shadename,formattedPrice,productSize,largeImage,parent.prodRgnName,parent.largeImage,parent.imageL,sale';break;case "m-a-c DIS":var brand='m-a-c';var brandUrl='http://www.maccosmetics.com';var layersUrl='http://ota.esteeonline.com/wishlist/manifest/mac.json';break;case "origins":var brand='origins';var brandUrl='http://www.origins.com';var layersUrl='https://layers.esteeonline.com/api/prodcat/LAYER0249/skus?q={"data.collection":"bca"}&select=shadename,formattedPrice,productSize,largeImage,parent.prodRgnName,parent.largeImage,parent.imageL,sale';break;case "origins DIS":var brand='origins';var brandUrl='';var layersUrl='http://ota.esteeonline.com/wishlist/manifest/origins.json';break;case "rodin":var brand='rodin';var brandUrl='http://ota.esteeonline.com/wishlist/images/rodin';var layersUrl='http://ota.esteeonline.com/wishlist/manifest/rodin2.json';break;case "smashbox":var brand='smashbox';var brandUrl='http://www.smashbox.com';var layersUrl='https://layers.esteeonline.com/api/prodcat/LAYER0248/skus?q={"data.collection":"bca"}&select=shadename,formattedPrice,productSize,largeImage,mediumImage,parent.prodRgnName,parent.largeImage,parent.imageL,sale';break;case "adf":var brand='adf';var brandUrl='http://ota.esteeonline.com/wishlist/images/adf';var layersUrl='http://ota.esteeonline.com/wishlist/manifest/adf.json';break;case "tom ford":var brand='tom ford';var brandUrl='http://ota.esteeonline.com/wishlist/images/tomford';var layersUrl='http://ota.esteeonline.com/wishlist/manifest/tomford.json';break;case "wips_donations":var brand='wips_donations';var brandUrl='http://ota.esteeonline.com/wishlist/images';var layersUrl='http://ota.esteeonline.com/wishlist/manifest/wip.json';break}
$.ajax({type:"GET",url:layersUrl,}).error(function(data,status,err){console.log(status+" for "+forBrand);addDataToDomFromDb(forBrand,brandUrl);if(status==='parseerror'){$('button#products').off('click');$('button#wishlist').off('click')}}).success(function(data,status,obj){addDataToDbFromServer(forBrand,brandUrl,obj,status);addDataToDomFromDb(forBrand,brandUrl)}).complete(function(obj,status){})}
function bySku(data,brand,brandUrl){var idCounter=0;var numSkus=data.length;for(var a=0;a<numSkus;a++){console.log("this brand is: "+brand);var thisProduct=data[a];var thisName=thisProduct.parent.prodRgnName;if(thisProduct.largeImage&&thisProduct.largeImage[0]!=='/media/images/products/875x773/sbx_sku_53710_875x773_0.jpg'){var thisImage=brandUrl+thisProduct.largeImage[0]}else if(thisProduct.mediumImage){var thisImage=brandUrl+thisProduct.mediumImage[0]}else if(thisProduct.parent.largeImage&&thisProduct.parent.largeImage!=='/media/export/cms/products/402x464/clq_71MC45_402x464.png'){var thisImage=brandUrl+thisProduct.parent.largeImage}else if(thisProduct.parent.imageL&&thisProduct.parent.imageL[0]!=='/media/export/cms/products/500x625/origins_sku_767G90_500x625_0.png'&&thisProduct.parent.imageL[0]!=='/media/export/cms/products/500x625/origins_sku_0LJ590_500x625_0.png'&&thisProduct.parent.imageL[0]!=='/media/export/cms/products/500x625/origins_sku_0MTL90_500x625_0.png'){var thisImage=brandUrl+thisProduct.parent.imageL[0]}else{var thisImage='images/noimage.png'}
var thisFormattedPrice=thisProduct.formattedPrice;var thisSale=thisProduct.sale;var thisShadeOrSize='';if(thisProduct.shadename===null){if(thisProduct.productSize){thisShadeOrSize=thisProduct.productSize}else{thisShadeOrSize=' '}}else{thisShadeOrSize=thisProduct.shadename}
var allSizes=[];var thisUpc="";allProducts.add([{brand:brand,productImage:'<img src="'+thisImage+'" class="img-responsive" />',prodRgnName:thisName,formattedPrice:thisFormattedPrice,formattedSale:formatMoneys(thisSale,2),sale:thisSale,qty:1,shadeOrSize:thisShadeOrSize,id:brand.trim()+idCounter}]);allProducts.update();idCounter++}}
function byProduct(data,brand,brandUrl){var idCounter=0;var numProducts=data.length;for(var a=0;a<numProducts;a++){var thisProduct=data[a];var thisName=thisProduct.prodRgnName;var thisImage=brandUrl+thisProduct.largeImage;var thisPrice=thisProduct.skus[0].price;var thisFormattedPrice=thisProduct.skus[0].formattedPrice;var thisSale=thisProduct.sale;var thisShadeOrSize='';if(thisProduct.shaded===0){if(thisProduct.sized===0){thisShadeOrSize=''}else{thisShadeOrSize=thisProduct.skus[0].productSize}}else{thisShadeOrSize=thisProduct.skus[0].shadename}
var allSizes=[];var thisUpc="";allProducts.add([{brand:brand,productImage:'<img src="'+thisImage+'" class="img-responsive" />',prodRgnName:thisName,formattedPrice:thisFormattedPrice,formattedSale:formatMoneys(thisSale,2),sale:thisSale,shadeOrSize:thisShadeOrSize,id:brand.trim()+idCounter}]);allProducts.update();idCounter++}}
function successHandleLayers(){}
function successHandle(json){var idCounter=0;var thisItemPROD=$(this).find(".product").text();var c=allProducts.get('product',thisItemPROD)[0];var numCATEGORIES=json[0].result.value.categories.length;for(var i=0;i<numCATEGORIES;i++){var thisCategory=json[0].result.value.categories[i].CATEGORY_NAME;var numPRODUCTS=json[0].result.value.categories[i].products.length;for(var j=0;j<numPRODUCTS;j++){var thisName=json[0].result.value.categories[i].products[j].PROD_RGN_NAME;var thisUrl="http://www.bumbleandbumble.com"+json[0].result.value.categories[i].products[j].SEO_URL;var thisDescription=json[0].result.value.categories[i].products[j].SHORT_DESC;var thisKeywords=json[0].result.value.categories[i].products[j].PROD_RGN_KEYWORDS;var thisImage="http://www.bumbleandbumble.com"+json[0].result.value.categories[i].products[j].LARGE_IMAGE;var thisThumbnail="http://www.bumbleandbumble.com"+json[0].result.value.categories[i].products[j].THUMBNAIL_IMAGE;var allSizes=[];var thisSize="";var thisUpc="";if(json[0].result.value.categories[i].products[j].skus.length==1){var thisSku=json[0].result.value.categories[i].products[j].skus[0].SKU_ID;var thisPrice=json[0].result.value.categories[i].products[j].skus[0].formattedPrice;thisUpc=json[0].result.value.categories[i].products[j].skus[0].UPC_CODE;thisSize='<div class="padleft bold">'+json[0].result.value.categories[i].products[j].skus[0].PRODUCT_SIZE+'</div>'}else{var thisUpc=json[0].result.value.categories[i].products[j].skus[0].UPC_CODE;var thisSku=json[0].result.value.categories[i].products[j].skus[0].SKU_ID;var numSIZES=json[0].result.value.categories[i].products[j].skus.length;for(var k=0;k<numSIZES;k++){allSizes[k]=json[0].result.value.categories[i].products[j].skus[k].PRODUCT_SIZE;thisSize+='<div class="sizeOption col-md-6"><input value="'+allSizes[k]+'" type="checkbox" /><label>'+allSizes[k]+'</label></div>';thisUpc+=json[0].result.value.categories[i].products[j].skus[k].UPC_CODE+" "}}
if(thisCategory.search("stress-fix")>=0){console.log(thisUpc)}
allProducts.add([{category:thisCategory,productImage:'<img src="'+thisImage+'" class="img-responsive" />',thumbnail:'<img src="'+thisThumbnail+'" />',product:thisName,description:thisDescription,sku:thisSku,sizes:thisSize,upc:thisUpc,keywords:thisKeywords,url:thisUrl,id:idCounter}]);allProducts.update();idCounter++}}
activateClickSelect()}